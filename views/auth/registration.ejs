<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

<head>
    <script src="../../public/js/color-modes.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" />
    <link rel="shortcut icon" href="../../public/img/ali.png" type="image/x-icon">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Create your account" />
    <title>Sign Up</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../public/css/dark-light.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../public/css/loginStyle.css" />
    <link rel="stylesheet" href="../../public/css/singupStyle.css" />

</head>

<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1 class="login-title">Create Account</h1>
                <p class="login-subtitle">Join us today and get started</p>
            </div>

            <% if (typeof message !=='undefined' && message) { %>
                <div class="alert alert-danger alert-custom alert-dismissible fade show" role="alert">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <%= message %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                <% } %>

                    <form action="/auth/signup" method="post" enctype="multipart/form-data" id="signupForm">
                        <div class="form-floating ">
                            <i class="bi bi-person input-icon"></i>
                            <input type="text" class="form-control" id="name" name="name" placeholder="John Doe"
                                value="<%= typeof formData !== 'undefined' && formData.name ? formData.name : '' %>"
                                required>
                            <label for="name">Full Name</label>
                        </div>

                        <div class="form-floating ">
                            <i class="bi bi-envelope input-icon"></i>
                            <input type="email" class="form-control" id="email" name="email"
                                placeholder="john@example.com"
                                value="<%= typeof formData !== 'undefined' && formData.email ? formData.email : '' %>"
                                required>
                            <label for="email">Email Address</label>
                        </div>

                        <div class="form-floating ">
                            <i class="bi bi-lock input-icon"></i>
                            <input type="password" class="form-control" id="password" name="password"
                                placeholder="Password"
                                value="<%= typeof formData !== 'undefined' && formData.password ? formData.password : '' %>"
                                required>
                            <label for="password">Password</label>
                        </div>

                        <div class="form-floating ">
                            <i class="bi bi-telephone input-icon"></i>
                            <input type="tel" class="form-control" id="phone" name="phone" placeholder="+1234567890"
                                value="<%= typeof formData !== 'undefined' && formData.phone ? formData.phone : '' %>"
                                required>
                            <label for="phone">Phone Number</label>
                        </div>

                        <div class="file-upload-container">
                            <input type="file" class="file-upload-input" id="profilePicture" name="profilePicture"
                                accept="image/*">
                            <label for="profilePicture" class="file-upload-label" id="fileUploadLabel">
                                <i class="bi bi-camera file-upload-icon"></i>
                                <span class="file-upload-text">Choose Profile Picture</span>
                                <span class="file-upload-filename d-none"></span>
                            </label>
                        </div>

                        <div class="form-floating">
                            <i class="bi bi-calendar input-icon"></i>
                            <input type="number" class="form-control" id="age" name="age" placeholder="27"
                                value="<%= typeof formData !== 'undefined' && formData.age ? formData.age : '' %>">
                            <label for="age">Age</label>
                        </div>

                        <div class="form-floating ">
                            <i class="bi bi-globe input-icon"></i>
                            <input type="text" class="form-control" id="country" name="country" placeholder="Egypt"
                                value="<%= typeof formData !== 'undefined' && formData.country ? formData.country : '' %>"
                                required>
                            <label for="country">Country</label>
                        </div>

                        <div class=" form-floating">
                            <i class="bi bi-gender-ambiguous input-icon"></i>
                            <div class="radio-inline form-control ml-8" style=" padding: 0rem 0rem 0rem 0rem">
                                <label><input type="radio" name="gender" value="male" <%=typeof formData !=='undefined'
                                        && formData.gender==='male' ? 'checked' : (typeof formData==='undefined'
                                        ? 'checked' : '' ) %>> Male</label>
                                <label><input type="radio" name="gender" value="female" <%=typeof formData
                                        !=='undefined' && formData.gender==='female' ? 'checked' : '' %>> Female</label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-login w-100 mb-3" id="signupBtn">
                            <span class="btn-text">Create Account</span>
                            <span class="btn-loading d-none">
                                <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                                Creating account...
                            </span>
                        </button>

                        <div class="signup-link">
                            <p>Already have an account? <a href="/auth/login">Sign in here</a></p>
                        </div>
                    </form>
        </div>
    </div>

    <script src="../../public/js/bootstrap.bundle.min.js"></script>
    <script src="../../public/js/main.js"></script>

    <script>
        // Add loading state to signup button
        document.getElementById('signupForm').addEventListener('submit', function (e) {
            const btn = document.getElementById('signupBtn');
            const btnText = btn.querySelector('.btn-text');
            const btnLoading = btn.querySelector('.btn-loading');
            const fileInput = document.getElementById('profilePicture');

            // Check if file is selected
            if (fileInput.files.length === 0) {
                e.preventDefault();
                alert('Please select a profile picture');
                return false;
            }

            // Show loading state
            btnText.classList.add('d-none');
            btnLoading.classList.remove('d-none');
            btn.disabled = true;

            // Allow form to submit normally
        });

        // Add focus effects to form inputs
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function () {
                this.parentElement.classList.add('focused');
            });

            input.addEventListener('blur', function () {
                if (!this.value) {
                    this.parentElement.classList.remove('focused');
                }
            });
        });

        // Handle file upload display
        document.getElementById('profilePicture').addEventListener('change', function (e) {
            const label = document.getElementById('fileUploadLabel');
            const text = label.querySelector('.file-upload-text');
            const filename = label.querySelector('.file-upload-filename');

            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                label.classList.add('has-file');
                text.classList.add('d-none');
                filename.textContent = file.name;
                filename.classList.remove('d-none');
            } else {
                label.classList.remove('has-file');
                text.classList.remove('d-none');
                filename.classList.add('d-none');
            }
        });
    </script>
</body>

</html>